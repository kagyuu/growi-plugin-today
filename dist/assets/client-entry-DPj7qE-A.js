const x="growi-plugin-today-embed",I="1.0.0",T="GROWI plugin for embed today",F="MIT",S=["growi","growi-plugin"],$="module",N={dev:"vite",build:"tsc && vite build",preview:"vite preview"},O={react:"^18.3.1","react-dom":"^18.3.1","react-innertext":"^1.1.5",unified:"^11.0.5","unist-util-visit":"^5.0.0"},E={"@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^5.0.0","@typescript-eslint/parser":"^5.0.0","@vitejs/plugin-react":"^4.3.1",eslint:"^8.18.0","eslint-config-next":"^14.2.4","eslint-config-weseek":"^2.1.0","eslint-import-resolver-typescript":"^3.2.5","eslint-plugin-import":"^2.29.1","eslint-plugin-jest":"^27.1.0","eslint-plugin-react":"^7.30.1","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-regex":"^1.10.0",jest:"^29.7.0",typescript:"^5.5.2",vite:"^5.3.2"},G={schemaVersion:"4",types:["script"]},L={name:x,version:I,description:T,license:F,keywords:S,type:$,scripts:N,dependencies:O,devDependencies:E,growiPlugin:G},A=function(e){if(e==null)return B;if(typeof e=="function")return h(e);if(typeof e=="object")return Array.isArray(e)?M(e):R(e);if(typeof e=="string")return q(e);throw new Error("Expected function, string, or object as test")};function M(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=A(e[n]);return h(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function R(e){const t=e;return h(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function q(e){return h(t);function t(n){return n&&n.type===e}}function h(e){return t;function t(n,r,i){return!!(C(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function B(){return!0}function C(e){return e!==null&&typeof e=="object"&&"type"in e}const P=[],H=!0,b=!1,K="skip";function U(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=A(i),a=r?-1:1;g(e,void 0,[])();function g(c,y,s){const l=c&&typeof c=="object"?c:{};if(typeof l.type=="string"){const u=typeof l.tagName=="string"?l.tagName:typeof l.name=="string"?l.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(c.type+(u?"<"+u+">":""))+")"})}return w;function w(){let u=P,f,p,v;if((!t||o(c,y,s[s.length-1]||void 0))&&(u=V(n(c,s)),u[0]===b))return u;if("children"in c&&c.children){const d=c;if(d.children&&u[0]!==K)for(p=(r?d.children.length:-1)+a,v=s.concat(d);p>-1&&p<d.children.length;){const j=d.children[p];if(f=g(j,p,v)(),f[0]===b)return f;p=typeof f[1]=="number"?f[1]:p+a}}return u}}}function V(e){return Array.isArray(e)?e:typeof e=="number"?[H,e]:e==null?P:[e]}function W(e,t,n,r){let i,o,a;typeof t=="function"&&typeof n!="function"?(o=void 0,a=t,i=n):(o=t,a=n,i=r),U(e,o,g,i);function g(c,y){const s=y[y.length-1],l=s?s.children.indexOf(c):void 0;return a(c,l,s)}}const k=function(){return e=>{W(e,t=>{const n=t;if(n.name!=="today")return;n.type="html",n.value='<div id="today"></div>';const r=setInterval(()=>{document.querySelector("#today")!=null&&(document.querySelector("#today").innerHTML=X(),clearInterval(r))},100)})}},X=function(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate();e.getDay();var i=[];return i.push("<fieldset>"),i.push("<legend>"+e.toISOString().slice(0,10)+"</legend>"),i.push(t.toString()),i.push("<br"),i.push(m(new Date(t,0,1),new Date(t+1,0,1),e)),i.push("<br"),i.push(e.toLocaleDateString("en",{month:"long"})),i.push("<br"),i.push(m(new Date(t,n,1),new Date(t,n+1,1),e)),i.push("<br"),i.push(e.toLocaleDateString("en",{weekday:"long"})),i.push("<br"),i.push(m(new Date(t,n,r),new Date(t,n,r+1),e)),i.push("</fieldset>"),i.join("")},D=24*60*60*1e3,m=function(e,t,n){const r=(t.getTime()-e.getTime())/D,i=(n.getTime()-e.getTime())/D,o=Math.floor(i/r*100);return`<meter value="${i}" min="0" max="${r}" title="${o}% (${i}/${r})" style="width:75px">${o}% (${i}/${r})</meter>`},Y=()=>{if(growiFacade==null||growiFacade.markdownRenderer==null)return;const{optionsGenerators:e}=growiFacade.markdownRenderer;e.customGenerateViewOptions=(...t)=>{const n=e.generateViewOptions(...t);return n.remarkPlugins.push(k),n},e.customGeneratePreviewOptions=(...t)=>{const n=e.generatePreviewOptions(...t);return n.remarkPlugins.push(k),n}},z=()=>{};window.pluginActivators==null&&(window.pluginActivators={});window.pluginActivators[L.name]={activate:Y,deactivate:z};
